这是一份系统化的 Docker Compose 常规指令总结。为了便于查阅，指令已按**日常使用场景**进行分类。

> **注**：以下指令基于目前官方推荐的 Docker Compose V2 版本（即使用空格分隔的 `docker compose`）。所有指令默认需要在 `docker-compose.yml` 文件所在的同级目录中执行。

### 1. 生命周期管理（最常用）

| **指令**                 | **作用说明**                       | **常见使用场景**                           |
| ------------------------ | ---------------------------------- | ------------------------------------------ |
| `docker compose up`      | 前台启动所有服务。                 | 首次调试，需要实时看所有容器的混合日志。   |
| `docker compose up -d`   | **后台（分离模式）启动**所有服务。 | 日常开发最常用，启动后不占用当前终端界面。 |
| `docker compose down`    | **停止并彻底删除**容器、默认网络。 | 结束开发工作，清理环境以释放资源。         |
| `docker compose stop`    | 仅停止容器运行，**不删除**容器。   | 暂时离开，稍后还要继续当前的状态。         |
| `docker compose start`   | 唤醒被 `stop` 暂停的容器。         | 恢复之前的开发环境，启动速度极快。         |
| `docker compose restart` | 重启服务。                         | 修改了某些配置文件后，让容器重新加载。     |

------

### 2. 状态查看与日志监控

| **指令**              | **作用说明**                                                 | **附加参数技巧**                                             |
| --------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| `docker compose ps`   | 列出当前 `docker-compose.yml` 管理的所有容器及其状态（运行中、已退出等）。 | 加 `-a` 看所有状态的容器。                                   |
| `docker compose logs` | 打印服务的标准输出日志。                                     | 加 `-f`（follow）实现日志持续滚动输出，类似 `tail -f`。 加 `--tail=50` 仅看最后50行。 |
| `docker compose top`  | 显示各个容器内正在运行的进程。                               | 用于排查容器内是否有死循环或异常进程占用 CPU。               |

------

### 3. 容器交互与执行

在多容器项目中，使用 Compose 指令可以直接通过**服务名**（如 `rmu_nav`）进行交互，而不需要去记长长的**容器名**（如 `rmu_nav_container`）。

| **指令**              | **作用说明**                                             | **示例**                                                     |
| --------------------- | -------------------------------------------------------- | ------------------------------------------------------------ |
| `docker compose exec` | 在**正在运行**的容器中执行命令（等同于 `docker exec`）。 | `docker compose exec rmu_nav /bin/zsh`  （进入 `rmu_nav` 服务的 Zsh 终端） |
| `docker compose run`  | 启动一个**新的临时容器**并执行命令（通常用于测试）。     | `docker compose run rmu_nav bash`                            |

------

### 4. 镜像构建与清理

| **指令**               | **作用说明**                                   | **常见使用场景**                           |
| ---------------------- | ---------------------------------------------- | ------------------------------------------ |
| `docker compose build` | 强制重新构建项目中定义了 `build:` 指令的镜像。 | 当你修改了底层的 `Dockerfile` 时必须执行。 |
| `docker compose rm`    | 删除已经停止（`stop`）的容器。                 | 清理那些不需要且占用硬盘空间的废弃容器。   |

------

**核心工作流记忆口诀：**

1. 改完配置要启动：`docker compose up -d`
2. 进容器去敲代码：`docker compose exec <服务名> /bin/zsh`
3. 下班收工清环境：`docker compose down`





set https_proxy=http://127.0.0.1:7899



